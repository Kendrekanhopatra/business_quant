<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Stock Screener - Business Quant Style</title>
    
    <!-- External Libraries -->
    <link href="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/css/select2.min.css" rel="stylesheet" />
    <link href="https://cdn.datatables.net/1.13.6/css/jquery.dataTables.min.css" rel="stylesheet" />
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet" />
    
    <!-- Plugin CSS -->
    <link href="assets/css/screener-dropdown.css" rel="stylesheet" />
    
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            margin: 0;
            padding: 0;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
        }
        
        .header {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            padding: 20px 0;
            box-shadow: 0 2px 20px rgba(0,0,0,0.1);
            margin-bottom: 30px;
        }
        
        .header-content {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
            display: flex;
            align-items: center;
            justify-content: space-between;
        }
        
        .logo {
            font-size: 24px;
            font-weight: bold;
            color: #2c3e50;
        }
        
        .logo i {
            color: #3498db;
            margin-right: 10px;
        }
        
        .nav-links {
            display: flex;
            gap: 30px;
        }
        
        .nav-links a {
            color: #2c3e50;
            text-decoration: none;
            font-weight: 500;
            transition: color 0.3s ease;
        }
        
        .nav-links a:hover {
            color: #3498db;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }
        
        .hero-section {
            text-align: center;
            color: white;
            margin-bottom: 40px;
        }
        
        .hero-section h1 {
            font-size: 3em;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }
        
        .hero-section p {
            font-size: 1.2em;
            opacity: 0.9;
            margin-bottom: 30px;
        }
        
        .screener-dropdown-wrapper {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            overflow: hidden;
        }
        
        .stats-bar {
            background: linear-gradient(45deg, #3498db, #2980b9);
            color: white;
            padding: 15px 30px;
            display: flex;
            justify-content: space-around;
            text-align: center;
        }
        
        .stat-item h3 {
            margin: 0;
            font-size: 1.8em;
        }
        
        .stat-item p {
            margin: 5px 0 0 0;
            opacity: 0.9;
            font-size: 0.9em;
        }
        
        .feature-badges {
            display: flex;
            gap: 10px;
            justify-content: center;
            margin: 20px 0;
            flex-wrap: wrap;
        }
        
        .badge {
            background: #e8f4fd;
            color: #2980b9;
            padding: 8px 16px;
            border-radius: 20px;
            font-size: 0.9em;
            font-weight: 500;
        }
        
        .footer {
            margin-top: 50px;
            text-align: center;
            color: white;
            opacity: 0.8;
            padding: 20px;
        }
        
        /* Enhanced filter styling */
        .filter-row {
            background: linear-gradient(145deg, #ffffff, #f8f9fa);
            border: 1px solid #e3e8ed;
            box-shadow: 0 4px 6px rgba(0,0,0,0.05);
        }
        
        .filter-row:hover {
            box-shadow: 0 8px 25px rgba(0,0,0,0.1);
            transform: translateY(-2px);
        }
        
        /* Enhanced button styling */
        .btn {
            transition: all 0.3s ease;
            border: none;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }
        
        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0,0,0,0.15);
        }
        
        .btn-primary {
            background: linear-gradient(45deg, #3498db, #2980b9);
        }
        
        .btn-success {
            background: linear-gradient(45deg, #27ae60, #229954);
        }
        
        .btn-secondary {
            background: linear-gradient(45deg, #95a5a6, #7f8c8d);
        }
        
        /* Loading animation */
        .loading {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 3px solid rgba(255,255,255,.3);
            border-radius: 50%;
            border-top-color: #fff;
            animation: spin 1s ease-in-out infinite;
            margin-right: 10px;
        }
        
        @keyframes spin {
            to { transform: rotate(360deg); }
        }
        
        /* Mobile responsiveness */
        @media (max-width: 768px) {
            .hero-section h1 {
                font-size: 2em;
            }
            
            .stats-bar {
                flex-direction: column;
                gap: 15px;
            }
            
            .header-content {
                flex-direction: column;
                gap: 15px;
            }
            
            .nav-links {
                gap: 15px;
            }
        }
    </style>
</head>
<body>
    <div class="header">
        <div class="header-content">
            <div class="logo">
                <i class="fas fa-chart-line"></i>
                Business Quant
            </div>
            <nav class="nav-links">
                <a href="#screener">Stock Screener</a>
                <a href="#about">About</a>
                <a href="#pricing">Pricing</a>
                <a href="#contact">Contact</a>
            </nav>
        </div>
    </div>

    <div class="container">
        <div class="hero-section">
            <h1>Advanced Stock Screener</h1>
            <p>Filter and analyze stocks with professional-grade financial metrics</p>
            
            <div class="feature-badges">
                <span class="badge"><i class="fas fa-filter"></i> Advanced Filtering</span>
                <span class="badge"><i class="fas fa-download"></i> CSV Export</span>
                <span class="badge"><i class="fas fa-mobile-alt"></i> Mobile Friendly</span>
                <span class="badge"><i class="fas fa-bolt"></i> Real-time Results</span>
            </div>
        </div>

        <div id="screener-dropdown-container" class="screener-dropdown-wrapper">
            <div class="stats-bar">
                <div class="stat-item">
                    <h3>5,000+</h3>
                    <p>Companies</p>
                </div>
                <div class="stat-item">
                    <h3>200+</h3>
                    <p>Metrics</p>
                </div>
                <div class="stat-item">
                    <h3>∞</h3>
                    <p>Filter Combinations</p>
                </div>
            </div>
            
            <div class="screener-header">
                <h3><i class="fas fa-search"></i> Stock Screener</h3>
                <p>Create custom filters to find stocks that match your investment criteria</p>
            </div>
            
            <div class="screener-filters">
                <div class="filters-header">
                    <h4><i class="fas fa-sliders-h"></i> Filters</h4>
                    <button id="add-filter-btn" class="btn btn-primary">
                        <i class="fas fa-plus"></i> Add Filter
                    </button>
                </div>
                
                <div id="filters-container">
                    <!-- Filters will be added dynamically here -->
                </div>
                
                <div class="filter-actions">
                    <button id="apply-filters-btn" class="btn btn-success">
                        <i class="fas fa-play"></i> Apply Filters
                    </button>
                    <button id="clear-filters-btn" class="btn btn-secondary">
                        <i class="fas fa-trash"></i> Clear All
                    </button>
                </div>
            </div>
            
            <div class="screener-results">
                <div class="results-header">
                    <h4><i class="fas fa-table"></i> Results</h4>
                    <div class="results-info">
                        <span id="results-count">0 companies found</span>
                        <button id="export-btn" class="btn btn-outline">
                            <i class="fas fa-download"></i> Export CSV
                        </button>
                    </div>
                </div>
                
                <div class="table-container">
                    <table id="screener-results-table" class="display" style="width:100%">
                        <thead>
                            <tr>
                                <th>Ticker</th>
                                <th>Company Name</th>
                                <th>Industry</th>
                                <th>Sector</th>
                                <th>Market Cap</th>
                                <th>P/E Ratio</th>
                                <th>Revenue (TTM)</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody>
                            <!-- Sample data for demo -->
                            <tr>
                                <td>AAPL</td>
                                <td>Apple Inc.</td>
                                <td>Technology</td>
                                <td>Consumer Electronics</td>
                                <td>2.8T</td>
                                <td>28.5</td>
                                <td>394.3B</td>
                                <td><button class="btn btn-sm btn-info"><i class="fas fa-eye"></i> View</button></td>
                            </tr>
                            <tr>
                                <td>MSFT</td>
                                <td>Microsoft Corporation</td>
                                <td>Technology</td>
                                <td>Software</td>
                                <td>2.4T</td>
                                <td>32.1</td>
                                <td>211.9B</td>
                                <td><button class="btn btn-sm btn-info"><i class="fas fa-eye"></i> View</button></td>
                            </tr>
                            <tr>
                                <td>GOOGL</td>
                                <td>Alphabet Inc.</td>
                                <td>Technology</td>
                                <td>Internet Services</td>
                                <td>1.7T</td>
                                <td>25.8</td>
                                <td>307.4B</td>
                                <td><button class="btn btn-sm btn-info"><i class="fas fa-eye"></i> View</button></td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
        
        <div class="footer">
            <p>&copy; 2024 Business Quant. Professional Stock Analysis Platform.</p>
        </div>
    </div>

    <!-- Filter Template (Hidden) -->
    <div id="filter-template" style="display: none;">
        <div class="filter-row">
            <div class="filter-controls">
                <div class="filter-field">
                    <label><i class="fas fa-chart-bar"></i> Metric:</label>
                    <select class="metric-select" style="width: 250px;">
                        <option value="">Select a metric...</option>
                        
                        <!-- All key metrics from screener_list.csv -->
                        <optgroup label="📊 Valuation Multiples">
                            <option value="Book Value per Share" data-type="int">Book Value per Share</option>
                            <option value="EV to Assets" data-type="int">EV to Assets</option>
                            <option value="EV to Cash from Ops." data-type="int">EV to Cash from Ops.</option>
                            <option value="EV to Debt" data-type="int">EV to Debt</option>
                            <option value="EV to EBIT" data-type="int">EV to EBIT</option>
                            <option value="EV to EBITDA" data-type="int">EV to EBITDA</option>
                            <option value="EV to Free Cash Flow [EV/FCF]" data-type="int">EV to Free Cash Flow [EV/FCF]</option>
                            <option value="EV to Market Cap" data-type="int">EV to Market Cap</option>
                            <option value="EV to Revenue" data-type="int">EV to Revenue</option>
                            <option value="Price to Book Value [P/B]" data-type="int">Price to Book Value [P/B]</option>
                            <option value="Price to Earnings [P/E]" data-type="int">Price to Earnings [P/E]</option>
                            <option value="Price to Free Cash Flow [P/FCF]" data-type="int">Price to Free Cash Flow [P/FCF]</option>
                            <option value="Price to Sales [P/S]" data-type="int">Price to Sales [P/S]</option>
                        </optgroup>

                        <optgroup label="💰 Profitability & Other Metrics">
                            <option value="Debt Ratio (Annual)" data-type="int">Debt Ratio (Annual)</option>
                            <option value="Debt to Equity Ratio (Annual)" data-type="int">Debt to Equity Ratio (Annual)</option>
                            <option value="Dividend Coverage Ratio (Annual)" data-type="int">Dividend Coverage Ratio (Annual)</option>
                            <option value="Dividend Payout Ratio % (Annual)" data-type="%">Dividend Payout Ratio % (Annual)</option>
                            <option value="Dividend Yield %" data-type="%">Dividend Yield %</option>
                            <option value="Dividend per Basic Share (Annual)" data-type="int">Dividend per Basic Share (Annual)</option>
                            <option value="EBIT Margin % (Annual)" data-type="%">EBIT Margin % (Annual)</option>
                            <option value="EBITDA Margin % (Annual)" data-type="%">EBITDA Margin % (Annual)</option>
                            <option value="EBT Margin % (Annual)" data-type="%">EBT Margin % (Annual)</option>
                            <option value="Equity Multiplier (Annual)" data-type="int">Equity Multiplier (Annual)</option>
                            <option value="FCF Dividend Payout Ratio % (Annual)" data-type="%">FCF Dividend Payout Ratio % (Annual)</option>
                            <option value="Gross Margin % (Annual)" data-type="%">Gross Margin % (Annual)</option>
                            <option value="Net Profit Margin % (Annual)" data-type="%">Net Profit Margin % (Annual)</option>
                            <option value="ROA - Return on Assets (%) (Annual)" data-type="%">ROA - Return on Assets (%) (Annual)</option>
                            <option value="ROCE - Return on Capital Employed (%) (Annual)" data-type="%">ROCE - Return on Capital Employed (%) (Annual)</option>
                            <option value="ROE - Return on Equity (%) (Annual)" data-type="%">ROE - Return on Equity (%) (Annual)</option>
                        </optgroup>

                        <optgroup label="� Growth Metrics">
                            <option value="Capex Growth (1y) % (Annual)" data-type="%">Capex Growth (1y) % (Annual)</option>
                            <option value="Cash and Equivalents Growth (1y) % (Annual)" data-type="%">Cash and Equivalents Growth (1y) % (Annual)</option>
                            <option value="Dividend Growth (1y) % (Annual)" data-type="%">Dividend Growth (1y) % (Annual)</option>
                            <option value="EBIAT Growth (1y) % (Annual)" data-type="%">EBIAT Growth (1y) % (Annual)</option>
                            <option value="EBIT Growth (1y) % (Annual)" data-type="%">EBIT Growth (1y) % (Annual)</option>
                            <option value="EBITDA Growth (1y) % (Annual)" data-type="%">EBITDA Growth (1y) % (Annual)</option>
                            <option value="EBT Growth (1y) % (Annual)" data-type="%">EBT Growth (1y) % (Annual)</option>
                            <option value="EPS Growth (1y) % (Annual)" data-type="%">EPS Growth (1y) % (Annual)</option>
                            <option value="FCF Growth (1y) % (Annual)" data-type="%">FCF Growth (1y) % (Annual)</option>
                            <option value="Gross Profit Growth (1y) % (Annual)" data-type="%">Gross Profit Growth (1y) % (Annual)</option>
                            <option value="Inventory Growth (1y) % (Annual)" data-type="%">Inventory Growth (1y) % (Annual)</option>
                            <option value="NOPAT Growth (1y) % (Annual)" data-type="%">NOPAT Growth (1y) % (Annual)</option>
                            <option value="Net Income Growth (1y) % (Annual)" data-type="%">Net Income Growth (1y) % (Annual)</option>
                            <option value="OPEX Growth (1y) % (Annual)" data-type="%">OPEX Growth (1y) % (Annual)</option>
                            <option value="Operating Income Growth (1y) % (Annual)" data-type="%">Operating Income Growth (1y) % (Annual)</option>
                            <option value="Revenue Growth (1y) % (Annual)" data-type="%">Revenue Growth (1y) % (Annual)</option>
                        </optgroup>

                        <optgroup label="🏢 Balance Sheet">
                            <option value="Accounts Payables (Annual)" data-type="int">Accounts Payables (Annual)</option>
                            <option value="Accumulated Other Comprehensive Income (Annual)" data-type="int">Accumulated Other Comprehensive Income (Annual)</option>
                            <option value="Cash and Equivalents (Annual)" data-type="int">Cash and Equivalents (Annual)</option>
                            <option value="Current Assets (Annual)" data-type="int">Current Assets (Annual)</option>
                            <option value="Current Liabilities (Annual)" data-type="int">Current Liabilities (Annual)</option>
                            <option value="Deferred Revenue (Annual)" data-type="int">Deferred Revenue (Annual)</option>
                            <option value="Intangible Assets (Annual)" data-type="int">Intangible Assets (Annual)</option>
                            <option value="Long Term Debt (Annual)" data-type="int">Long Term Debt (Annual)</option>
                            <option value="Long-Term Investments (Annual)" data-type="int">Long-Term Investments (Annual)</option>
                            <option value="Non-Current Liabilities (Annual)" data-type="int">Non-Current Liabilities (Annual)</option>
                            <option value="Other Current Assets (Annual)" data-type="int">Other Current Assets (Annual)</option>
                            <option value="Other Current Liabilities (Annual)" data-type="int">Other Current Liabilities (Annual)</option>
                            <option value="Property Plant & Equipment, net (Annual)" data-type="int">Property Plant & Equipment, net (Annual)</option>
                        </optgroup>

                        <optgroup label="📋 Income Statement">
                            <option value="Cost of Revenues (Annual)" data-type="int">Cost of Revenues (Annual)</option>
                            <option value="EBT (Annual)" data-type="int">EBT (Annual)</option>
                            <option value="Gross Profit (Annual)" data-type="int">Gross Profit (Annual)</option>
                            <option value="Income Tax (Annual)" data-type="int">Income Tax (Annual)</option>
                            <option value="Interest Expense & Investment Income (Annual)" data-type="int">Interest Expense & Investment Income (Annual)</option>
                            <option value="Operating Income (Annual)" data-type="int">Operating Income (Annual)</option>
                            <option value="Other Operating Expenses (Annual)" data-type="int">Other Operating Expenses (Annual)</option>
                            <option value="R&D Expenses (Annual)" data-type="int">R&D Expenses (Annual)</option>
                        </optgroup>

                        <optgroup label="💸 Cash Flow Statement">
                            <option value="Business Acquisitions and Disposals (Annual)" data-type="int">Business Acquisitions and Disposals (Annual)</option>
                            <option value="Capital Expenditure (-1) (Annual)" data-type="int">Capital Expenditure (-1) (Annual)</option>
                            <option value="Depreciation Amortization & Accretion (Annual)" data-type="int">Depreciation Amortization & Accretion (Annual)</option>
                            <option value="Dividends & Other Cash Distributions (Annual)" data-type="int">Dividends & Other Cash Distributions (Annual)</option>
                            <option value="Free Cash Flow [FCF] (Annual)" data-type="int">Free Cash Flow [FCF] (Annual)</option>
                            <option value="Net Cash Flow (Annual)" data-type="int">Net Cash Flow (Annual)</option>
                            <option value="Net Cash Flow from Operations (Annual)" data-type="int">Net Cash Flow from Operations (Annual)</option>
                        </optgroup>

                        <optgroup label="🔧 Others">
                            <option value="Company Name" data-type="string">Company Name</option>
                            <option value="Industry" data-type="string">Industry</option>
                            <option value="Market Capitalization" data-type="int">Market Capitalization</option>
                            <option value="Enterprise Value (EV)" data-type="int">Enterprise Value (EV)</option>
                            <option value="Current Ratio (Annual)" data-type="int">Current Ratio (Annual)</option>
                            <option value="Cash Ratio (Annual)" data-type="int">Cash Ratio (Annual)</option>
                            <option value="Interest Cover Ratio (Annual)" data-type="int">Interest Cover Ratio (Annual)</option>
                            <option value="Date of Screening" data-type="date">Date of Screening</option>
                            <option value="Delisted" data-type="string">Delisted</option>
                        </optgroup>
                    </select>
                </div>
                
                <div class="filter-field">
                    <label><i class="fas fa-equals"></i> Operator:</label>
                    <select class="operator-select">
                        <option value="">Select operator...</option>
                        <option value="equals">Equals</option>
                        <option value="greater_than">Greater than</option>
                        <option value="less_than">Less than</option>
                        <option value="greater_equal">Greater than or equal</option>
                        <option value="less_equal">Less than or equal</option>
                        <option value="contains">Contains</option>
                    </select>
                </div>
                
                <div class="filter-field">
                    <label><i class="fas fa-keyboard"></i> Value:</label>
                    <input type="text" class="filter-value" placeholder="Enter value...">
                </div>
                
                <div class="filter-actions">
                    <button type="button" class="remove-filter-btn btn btn-danger" title="Remove Filter">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- External Libraries -->
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/js/select2.min.js"></script>
    <script src="https://cdn.datatables.net/1.13.6/js/jquery.dataTables.min.js"></script>
    
    <!-- Include the main plugin JavaScript -->
    <script src="assets/js/screener-dropdown.js"></script>
    
    <!-- Real-time functionality -->
    <script>
        // Real AJAX object for live functionality
        var screener_ajax = {
            ajax_url: 'api.php',
            nonce: 'live_demo'
        };

        // Add loading animation to apply button
        jQuery(document).ready(function($) {
            $(document).on('click', '#apply-filters-btn', function() {
                var $btn = $(this);
                var originalText = $btn.html();
                $btn.html('<span class="loading"></span>Applying Filters...');

                // The actual filtering will be handled by the main JavaScript
                setTimeout(function() {
                    if ($btn.html().includes('Applying Filters...')) {
                        $btn.html(originalText);
                    }
                }, 10000); // Fallback timeout
            });
        });
    </script>
</body>
</html>
